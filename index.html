<canvas></canvas>
<script>
let c=document.querySelector("canvas"),x=c.getContext("2d"),s=30;c.width=c.height=240;let E=0,P1=1,P2=2;let b=Array.from({length:8},()=>Array(8).fill(0));b[3][3]=1,b[4][4]=1,b[3][4]=2,b[4][3]=2;let p=1;function f(t,e,r,l){let a=1===p?2:1,c=t+r,n=e+l,o=0;for(;c>=0&&n>=0&&c<8&&n<8&&b[c][n]===a;)c+=r,n+=l,o++;if(o>0&&c>=0&&n>=0&&c<8&&n<8&&b[c][n]===p)for(let $=0;$<=o;$++)c-=r,n-=l,b[c][n]=p}function P(t,e){if(0!==b[t][e])return!1;let r=!1;for(let l=-1;l<=1;l++)for(let a=-1;a<=1;a++)(0!==l||0!==a)&&f(t,e,l,a);return 0!==b[t][e]&&(p=1===p?2:1,r=!0)}function d(){for(let t=0;t<8;t++)for(let e=0;e<8;e++)x.beginPath(),x.rect(s*t,s*e,s,s),x.fillStyle="green",x.fill(),1===b[t][e]?(x.fillStyle="black",x.beginPath(),x.arc(s*t+15,s*e+15,12,0,2*Math.PI),x.fill()):2===b[t][e]&&(x.fillStyle="white",x.beginPath(),x.arc(s*t+15,s*e+15,12,0,2*Math.PI),x.fill())}c.addEventListener("click",t=>{let e=c.getBoundingClientRect(),r=Math.floor((t.clientX-e.left)/s),l=Math.floor((t.clientY-e.top)/s);P(r,l)&&d()}),d();
</script>
